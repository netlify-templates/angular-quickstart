<div class="tp-page" *ngIf="townConfig">
  <!-- HERO SECTION -->
  <section class="tp-hero">
    <div class="tp-hero-left">
      <h1 class="tp-hero-title">{{ heroTitle }}</h1>

      <p class="tp-hero-subtitle">{{ heroSubtitle }}</p>

      <ul class="tp-hero-list" *ngIf="townConfig.heroBullets?.length">
        <li
          *ngFor="let bullet of townConfig.heroBullets; trackBy: trackByIndex"
        >
          <mat-icon [attr.aria-label]="'Bullet check mark'" role="img"
            >check_circle</mat-icon
          >
          <span>{{ bullet }}</span>
        </li>
      </ul>

      <div class="tp-hero-actions">
        <button
          mat-raised-button
          (click)="onCallClick()"
          [attr.aria-label]="townConfig.heroCTAText || 'Call to book service'"
        >
          <mat-icon [attr.aria-label]="'Phone icon'" role="img">call</mat-icon>
          {{ townConfig.heroCTAText || "Call to book service" }}
        </button>
      </div>
    </div>

    <div class="tp-hero-right">
      <mat-card class="tp-hero-card">
        <mat-card-header>
          <div mat-card-avatar class="tp-hero-avatar" aria-hidden="true">
            <mat-icon [attr.aria-label]="'Technician avatar icon'" role="img"
              >engineering</mat-icon
            >
          </div>
          <mat-card-title
            >Local {{ townConfig.regionLabel }} Electrician</mat-card-title
          >
          <!-- // @Nathaniel fix this to add links to the surrounding areas -->
          <mat-card-subtitle>
            {{
              townConfig.areasServed.slice(0, 4).join(" • ")
                ? townConfig.areasServed.slice(0, 4).join(" • ") + " • View All"
                : "View All"
            }}
          </mat-card-subtitle>
        </mat-card-header>

        <mat-card-content>
          <p>
            From homes and remodels to ranch shops and small businesses, we
            design, repair, and upgrade electrical systems built for real
            {{ townConfig.regionLabel }} use.
          </p>

          <div class="tp-chip-row">
            <mat-chip-listbox aria-label="Service highlights">
              <mat-chip>Licensed & Insured</mat-chip>
              <mat-chip>Residential</mat-chip>
              <mat-chip>Commercial</mat-chip>
              <mat-chip>Ranch Properties</mat-chip>
            </mat-chip-listbox>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </section>

  <!-- RESIDENTIAL SERVICES -->
  <section class="tp-section">
    <mat-card class="tp-card">
      <mat-card-header>
        <div mat-card-avatar class="tp-card-avatar" aria-hidden="true">
          <mat-icon [attr.aria-label]="'Home services icon'" role="img"
            >home</mat-icon
          >
        </div>
        <mat-card-title>{{ residentialHeading }}</mat-card-title>
        <mat-card-subtitle>
          {{
            townConfig.residentialSubheading ||
              "Safe, clean, and code-compliant work for your home."
          }}
        </mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <p class="tp-section-intro" *ngIf="townConfig.residentialIntro">
          {{ townConfig.residentialIntro }}
        </p>

        <div class="tp-service-grid">
          <div
            class="tp-service-item"
            *ngFor="
              let service of townConfig.residentialServices;
              trackBy: trackByLabel
            "
          >
            <mat-icon
              class="tp-service-icon"
              [attr.aria-label]="service.label + ' icon'"
              role="img"
              >{{ service.icon }}</mat-icon
            >
            <span>{{ service.label }}</span>
          </div>
        </div>
        <button
          mat-stroked-button
          class="tp-card-btn"
          type="button"
          [routerLink]="[
            '/',
            SitePaths.electricalServices,
            SitePaths.residentialElectrician
          ]"
        >
          <mat-icon>arrow_forward</mat-icon>
          All ProVolt Residential Services
        </button>
      </mat-card-content>
    </mat-card>
  </section>

  <!-- COMMERCIAL SERVICES -->
  <section class="tp-section">
    <mat-card class="tp-card">
      <mat-card-header>
        <div mat-card-avatar class="tp-card-avatar" aria-hidden="true">
          <mat-icon [attr.aria-label]="'Business services icon'" role="img"
            >business</mat-icon
          >
        </div>
        <mat-card-title>{{ commercialHeading }}</mat-card-title>
        <mat-card-subtitle>
          {{
            townConfig.commercialSubheading ||
              "Built for shops, businesses, and Hill Country properties."
          }}
        </mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <p class="tp-section-intro" *ngIf="townConfig.commercialIntro">
          {{ townConfig.commercialIntro }}
        </p>

        <div class="tp-service-grid">
          <div
            class="tp-service-item"
            *ngFor="
              let service of townConfig.commercialServices;
              trackBy: trackByLabel
            "
          >
            <mat-icon
              class="tp-service-icon"
              [attr.aria-label]="service.label + ' icon'"
              role="img"
              >{{ service.icon }}</mat-icon
            >
            <span>{{ service.label }}</span>
          </div>
        </div>
        <button
          mat-stroked-button
          class="tp-card-btn"
          type="button"
          [routerLink]="[
            '/',
            SitePaths.electricalServices,
            SitePaths.commercialElectrician
          ]"
        >
          <mat-icon>arrow_forward</mat-icon>
          All ProVolt Commercial Services
        </button>
      </mat-card-content>
    </mat-card>
  </section>

  <!-- RANCH SERVICES -->
  <section class="tp-section">
    <mat-card class="tp-card">
      <mat-card-header>
        <div mat-card-avatar class="tp-card-avatar" aria-hidden="true">
          <mat-icon [attr.aria-label]="'Ranch services icon'" role="img"
            >business</mat-icon
          >
        </div>
        <mat-card-title>{{ townConfig.ranchHeading }}</mat-card-title>
        <mat-card-subtitle>
          {{
            townConfig.ranchSubheading ||
              "Built for shops, businesses, and Hill Country properties."
          }}
        </mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <p class="tp-section-intro" *ngIf="townConfig.ranchIntro">
          {{ townConfig.ranchIntro }}
        </p>

        <div class="tp-service-grid">
          <div
            class="tp-service-item"
            *ngFor="
              let service of townConfig.ranchServices;
              trackBy: trackByLabel
            "
          >
            <mat-icon
              class="tp-service-icon"
              [attr.aria-label]="service.label + ' icon'"
              role="img"
              >{{ service.icon }}</mat-icon
            >
            <span>{{ service.label }}</span>
          </div>
        </div>
        <button
          mat-stroked-button
          class="tp-card-btn"
          type="button"
          [routerLink]="[
            '/',
            SitePaths.electricalServices,
            SitePaths.ranchRuralElectrician
          ]"
        >
          <mat-icon>arrow_forward</mat-icon>
          All ProVolt Ranch & Rural Services
        </button>
      </mat-card-content>
    </mat-card>
  </section>

  <!-- LOCAL CONTEXT (Town-specific differentiator) -->
  <section class="tp-section" *ngIf="townConfig.localContext">
    <mat-card class="tp-card">
      <mat-card-header>
        <div mat-card-avatar class="tp-card-avatar" aria-hidden="true">
          <mat-icon [attr.aria-label]="'Info icon'" role="img">info</mat-icon>
        </div>
        <mat-card-title
          >Electrical Work That Fits {{ townLabel }}</mat-card-title
        >
        <mat-card-subtitle>
          Real-world context we see around {{ townConfig.regionLabel }}.
        </mat-card-subtitle>
      </mat-card-header>

      <mat-card-content class="tp-two-col">
        <div
          class="tp-col"
          *ngIf="townConfig.localContext?.homesAndProperties?.length"
        >
          <h3 class="tp-mini-title">Homes & Properties</h3>
          <ul class="tp-bullets">
            <li
              *ngFor="
                let item of townConfig.localContext.homesAndProperties;
                trackBy: trackByIndex
              "
            >
              {{ item }}
            </li>
          </ul>
        </div>

        <div
          class="tp-col"
          *ngIf="townConfig.localContext?.commonElectricalIssues?.length"
        >
          <h3 class="tp-mini-title">Common Issues We Fix</h3>
          <ul class="tp-bullets">
            <li
              *ngFor="
                let item of townConfig.localContext.commonElectricalIssues;
                trackBy: trackByIndex
              "
            >
              {{ item }}
            </li>
          </ul>
        </div>

        <div
          class="tp-col"
          *ngIf="townConfig.localContext?.businessAndRanchNotes?.length"
        >
          <h3 class="tp-mini-title">Shops, Ranches & Small Businesses</h3>
          <ul class="tp-bullets">
            <li
              *ngFor="
                let item of townConfig.localContext.businessAndRanchNotes;
                trackBy: trackByIndex
              "
            >
              {{ item }}
            </li>
          </ul>
        </div>
      </mat-card-content>
    </mat-card>
  </section>

  <!-- NEIGHBORHOODS / LANDMARKS (lightweight uniqueness) -->
  <section
    class="tp-section"
    *ngIf="townConfig.neighborhoods?.length || townConfig.landmarks?.length"
  >
    <mat-card class="tp-card">
      <mat-card-header>
        <div mat-card-avatar class="tp-card-avatar" aria-hidden="true">
          <mat-icon [attr.aria-label]="'Map icon'" role="img">place</mat-icon>
        </div>
        <mat-card-title>Where We Work Around {{ townLabel }}</mat-card-title>
        <mat-card-subtitle>
          Familiar areas we regularly serve (and nearby communities).
        </mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <div
          class="tp-chip-row tp-chip-row--wrap"
          *ngIf="townConfig.neighborhoods?.length"
        >
          <p class="tp-section-intro tp-tight">Neighborhoods & Subdivisions</p>
          <mat-chip-listbox aria-label="Neighborhoods served">
            <mat-chip
              *ngFor="let n of townConfig.neighborhoods; trackBy: trackByIndex"
            >
              {{ n }}
            </mat-chip>
          </mat-chip-listbox>
        </div>

        <div
          class="tp-chip-row tp-chip-row--wrap"
          *ngIf="townConfig.landmarks?.length"
        >
          <p class="tp-section-intro tp-tight">Landmarks & Corridors</p>
          <mat-chip-listbox aria-label="Landmarks served">
            <mat-chip
              *ngFor="let l of townConfig.landmarks; trackBy: trackByIndex"
            >
              {{ l }}
            </mat-chip>
          </mat-chip-listbox>
        </div>
      </mat-card-content>
    </mat-card>
  </section>

  <!-- RECENT LOCAL WORK (highest-value uniqueness) -->
  <section class="tp-section" *ngIf="townConfig.localProjects?.length">
    <mat-card class="tp-card">
      <mat-card-header>
        <div mat-card-avatar class="tp-card-avatar" aria-hidden="true">
          <mat-icon [attr.aria-label]="'Work icon'" role="img">build</mat-icon>
        </div>
        <mat-card-title
          >Recent Electrical Work in {{ townLabel }}</mat-card-title
        >
        <mat-card-subtitle>
          A few examples of what we’ve completed locally.
        </mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <div class="tp-project-grid">
          <mat-card
            class="tp-project"
            *ngFor="let p of townConfig.localProjects; trackBy: trackByIndex"
          >
            <div class="tp-project-head">
              <div>
                <div class="tp-project-title">{{ p.title }}</div>
                <div class="tp-project-sub" *ngIf="p.areaHint">
                  {{ p.areaHint }}
                </div>
              </div>

              <mat-icon aria-hidden="true">task_alt</mat-icon>
            </div>

            <p class="tp-project-summary">{{ p.summary }}</p>

            <ul class="tp-project-bullets" *ngIf="p.bullets?.length">
              <li *ngFor="let b of p.bullets; trackBy: trackByIndex">
                {{ b }}
              </li>
            </ul>

            <div class="tp-chip-row tp-chip-row--wrap" *ngIf="p.tags?.length">
              <mat-chip-listbox aria-label="Project tags">
                <mat-chip *ngFor="let t of p.tags; trackBy: trackByIndex">
                  {{ t }}
                </mat-chip>
              </mat-chip-listbox>
            </div>
          </mat-card>
        </div>
      </mat-card-content>
    </mat-card>
  </section>

  <!-- FAQs (Town-specific) -->
  <section class="tp-section" *ngIf="townConfig.faqs?.length">
    <mat-card class="tp-card">
      <mat-card-header>
        <div mat-card-avatar class="tp-card-avatar" aria-hidden="true">
          <mat-icon [attr.aria-label]="'FAQ icon'" role="img">help</mat-icon>
        </div>
        <mat-card-title>FAQs for {{ townLabel }}</mat-card-title>
        <mat-card-subtitle>
          Quick answers based on what customers ask most in this area.
        </mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <mat-accordion class="tp-accordion">
          <mat-expansion-panel
            *ngFor="let faq of townConfig.faqs; trackBy: trackByIndex"
            class="faq-section"
          >
            <mat-expansion-panel-header>
              <mat-panel-title>{{ faq.question }}</mat-panel-title>
            </mat-expansion-panel-header>
            <p class="tp-faq-answer">{{ faq.answer }}</p>
          </mat-expansion-panel>
        </mat-accordion>
      </mat-card-content>
    </mat-card>
  </section>

  <!-- Testimonials (Town-specific proof) -->
  <section class="tp-section" *ngIf="townConfig.testimonials?.length">
    <mat-card class="tp-card">
      <mat-card-header>
        <div mat-card-avatar class="tp-card-avatar" aria-hidden="true">
          <mat-icon [attr.aria-label]="'Reviews icon'" role="img"
            >reviews</mat-icon
          >
        </div>
        <mat-card-title>What {{ townLabel }} Customers Say</mat-card-title>
        <mat-card-subtitle
          >Local feedback from recent projects.</mat-card-subtitle
        >
      </mat-card-header>

      <mat-card-content>
        <div class="tp-testimonial-grid">
          <mat-card
            class="tp-quote"
            *ngFor="let t of townConfig.testimonials; trackBy: trackByIndex"
          >
            <div class="tp-quote-mark">“</div>
            <p class="tp-quote-text">{{ t.quote }}</p>
            <mat-divider></mat-divider>
            <div class="tp-quote-meta">
              <span *ngIf="t.name">{{ t.name }}</span>
              <span *ngIf="t.areaHint" class="tp-quote-area"
                >• {{ t.areaHint }}</span
              >
            </div>
          </mat-card>
        </div>
      </mat-card-content>
    </mat-card>
  </section>

  <!-- AREAS SERVED CALLOUT -->
  <section class="tp-section tp-section--alt">
    <mat-card class="tp-card tp-card--alt">
      <mat-card-header>
        <div
          mat-card-avatar
          class="tp-card-avatar tp-card-avatar--accent"
          aria-hidden="true"
        >
          <mat-icon [attr.aria-label]="'Map icon'" role="img">map</mat-icon>
        </div>
        <mat-card-title>
          Serving {{ townLabel }} and the {{ townConfig.regionLabel }}
        </mat-card-title>
        <mat-card-subtitle>Local service you can rely on.</mat-card-subtitle>
      </mat-card-header>

      <mat-card-content>
        <p class="tp-section-intro">
          Serving {{ townLabel }} and nearby
          {{
            townConfig.areasServed
              .slice(0, townConfig.areasServed.length - 1)
              .join(", ") +
              ", and " +
              townConfig.areasServed[townConfig.areasServed.length - 1]
          }}. For the full coverage map and complete list of towns:
        </p>

        <button
          mat-stroked-button
          class="tp-card-btn"
          type="button"
          [routerLink]="[
            '/' + SitePaths.serviceAreas,
            SitePaths.texasHillCountryElectrician
          ]"
        >
          <mat-icon [attr.aria-label]="'Visit residential services'" role="img"
            >arrow_forward</mat-icon
          >
          All ProVolt Electrical Services
        </button>
      </mat-card-content>
    </mat-card>
  </section>

  <!-- FINAL CTA -->
  <section class="tp-section tp-final-cta">
    <div class="tp-final-cta-inner">
      <div class="tp-final-text">
        <h2>Need an Electrician in {{ townLabel }}?</h2>
        <p>
          Whether it’s an emergency repair, a panel upgrade, or a full remodel,
          ProVolt Electrical Services is ready to help.
        </p>
      </div>

      <div class="tp-final-actions">
        <app-cta-button
          [label]="'Call'"
          (click)="onCallClick()"
        ></app-cta-button>
      </div>
    </div>
  </section>
</div>
